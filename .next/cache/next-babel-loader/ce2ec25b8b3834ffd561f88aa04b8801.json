{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { useState, useEffect } from 'react';\nimport { Container, Menu, Grid, Icon, Label } from 'semantic-ui-react';\nimport { map } from 'lodash';\nimport Link from 'next/link';\nimport BasicModal from '../../Modal/BasicModal';\nimport Auth from '../../Auth';\nimport useAuth from '../../../hooks/useAuth';\nimport { getMeApi } from '../../../api/user';\nimport { getPlatformsApi } from '../../../api/platform';\nimport useCart from '../../../hooks/useCart';\nexport default function MenuWeb() {\n  const {\n    0: platforms,\n    1: setPlatforms\n  } = useState([]);\n  const {\n    0: showModal,\n    1: setShowModal\n  } = useState(false);\n  const {\n    0: titleModal,\n    1: setTitleModal\n  } = useState(\"Iniciar Sesion\");\n  const {\n    0: user,\n    1: setUser\n  } = useState(undefined);\n  const {\n    auth,\n    logout\n  } = useAuth();\n  useEffect(() => {\n    (async () => {\n      const response = await getPlatformsApi();\n      setPlatforms(response || []);\n    })();\n  }, []);\n  useEffect(() => {\n    (async () => {\n      const response = await getMeApi(logout);\n      setUser(response);\n    })();\n  }, [auth]);\n\n  const onShowModal = () => setShowModal(true);\n\n  const onCloseModal = () => setShowModal(false);\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: \"menu\",\n    children: [/*#__PURE__*/_jsx(Container, {\n      children: /*#__PURE__*/_jsxs(Grid, {\n        children: [/*#__PURE__*/_jsx(Grid.Column, {\n          className: \"menu__left\",\n          width: 6,\n          children: /*#__PURE__*/_jsx(MenuPlatforms, {\n            platforms: platforms\n          })\n        }), /*#__PURE__*/_jsx(Grid.Column, {\n          className: \"menu__right\",\n          width: 10,\n          children: user !== undefined && /*#__PURE__*/_jsx(MenuOptions, {\n            onShowModal: onShowModal,\n            user: user,\n            logout: logout\n          })\n        })]\n      })\n    }), /*#__PURE__*/_jsx(BasicModal, {\n      show: showModal,\n      setShow: setShowModal,\n      title: titleModal,\n      size: \"small\",\n      children: /*#__PURE__*/_jsx(Auth, {\n        onCloseModal: onCloseModal,\n        setTitleModal: setTitleModal\n      })\n    })]\n  });\n}\n\nfunction MenuPlatforms({\n  platforms\n}) {\n  return /*#__PURE__*/_jsx(Menu, {\n    children: map(platforms, platform => /*#__PURE__*/_jsx(Link, {\n      href: `/games/${platform.url}`,\n      children: /*#__PURE__*/_jsx(Menu.Item, {\n        as: \"a\",\n        name: platform.url,\n        children: platform.title\n      })\n    }, platform.id))\n  });\n}\n\nfunction MenuOptions({\n  onShowModal,\n  user,\n  logout\n}) {\n  const {\n    productsCart\n  } = useCart();\n  return /*#__PURE__*/_jsx(Menu, {\n    children: user ? /*#__PURE__*/_jsxs(_Fragment, {\n      children: [/*#__PURE__*/_jsx(Link, {\n        href: \"/orders\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"game\"\n          }), \"Mis Pedidos\"]\n        })\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/wishlist\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"heart outline\"\n          }), \"Lista Deseos\"]\n        })\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/account\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"user outline\"\n          }), user.username]\n        })\n      }), /*#__PURE__*/_jsx(Link, {\n        href: \"/cart\",\n        children: /*#__PURE__*/_jsxs(Menu.Item, {\n          as: \"a\",\n          className: \"m-0\",\n          children: [/*#__PURE__*/_jsx(Icon, {\n            name: \"cart\"\n          }), productsCart > 0 && /*#__PURE__*/_jsx(Label, {\n            color: \"red\",\n            floating: true,\n            circular: true,\n            children: productsCart\n          })]\n        })\n      }), /*#__PURE__*/_jsx(Menu.Item, {\n        onClick: logout,\n        className: \"m-0\",\n        children: /*#__PURE__*/_jsx(Icon, {\n          name: \"power off\"\n        })\n      })]\n    }) : /*#__PURE__*/_jsxs(Menu.Item, {\n      onClick: onShowModal,\n      children: [/*#__PURE__*/_jsx(Icon, {\n        name: \"user outline\"\n      }), \"Mi Cuenta\"]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}